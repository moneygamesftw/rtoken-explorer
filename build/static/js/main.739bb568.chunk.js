(window["webpackJsonprDai-explorer"]=window["webpackJsonprDai-explorer"]||[]).push([[0],{119:function(t,e,n){t.exports=n(230)},222:function(t,e,n){},228:function(t,e,n){},230:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(17),o=n.n(c),i=n(18),l=n(28),s=n(20),u=n(19),d=n(21),m=n(35),h=n(25),p=n(89),f=n(68),b=n(16),w=n(36),v=n(111),g=n(112),k=n(90),E=n.n(k),O=function(t){function e(){return Object(i.a)(this,e),Object(s.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"core d-flex"},r.a.createElement("div",{className:"d-flex justify-content-center m-auto"},r.a.createElement("div",{className:"card card-cascade col-lg-6 col-md-9 col-sm-12 m-2 p-0"},r.a.createElement("h5",null,"Big thanks to community member Hadrien for getting this party started!"),r.a.createElement("div",{className:"view view-cascade"},r.a.createElement("img",{src:E.a,className:"card-img-top",alt:"profil"})),r.a.createElement("div",{className:"card-body card-body-cascade text-center"},r.a.createElement("h4",{className:"card-title"},r.a.createElement("strong",null,"Hadrien Croubois")),r.a.createElement("p",{className:"card-text"},"I developped this app for the"," ",r.a.createElement("a",{href:"https://thegraph.com/hackathons/2019/12"},"2nd thegraph hackathon")," ","using a dedicated"," ",r.a.createElement("a",{href:"https://thegraph.com/explorer/subgraph/amxx/rdai"},"subgraph")," ","for the backend and apollo/react for the frontend. I am not a member of the ",r.a.createElement("a",{href:"https://rdai.money/"},"rDai")," ","developpment team."),r.a.createElement("a",{href:"https://www.linkedin.com/in/hadriencroubois/",className:"icons-sm black-text mx-2"},r.a.createElement("i",{className:"fab fa-linkedin-in"}," ")),r.a.createElement("a",{href:"https://twitter.com/amxx/",className:"icons-sm black-text mx-2"},r.a.createElement("i",{className:"fab fa-twitter"}," ")),r.a.createElement("a",{href:"https://github.com/amxx/",className:"icons-sm black-text mx-2"},r.a.createElement("i",{className:"fab fa-github"}," ")),r.a.createElement("a",{href:"http://hadriencroubois.eth/",className:"icons-sm black-text mx-2"},r.a.createElement("i",{className:"fab fa-ethereum"}," "))))))}}]),e}(r.a.Component),y=n(38),j=n(91),x=n(14),N=n(51),C=n.n(N),D=function(t){function e(){var t,n;Object(i.a)(this,e);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).state={isOpen:!1,search:""},n}return Object(d.a)(e,t),Object(l.a)(e,[{key:"toggleCollapse",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"updateSearch",value:function(t){this.setState({search:t.target.value})}},{key:"submit",value:function(t){var e=this;t.preventDefault(),j.ethers.getDefaultProvider("mainnet").resolveName(this.state.search).then((function(t){t?e.props.emitter.emit("goTo","/".concat(e.props.network,"/nodeview/").concat(t.toLowerCase())):console.erro("'".concat(e.state.search,"' is not a valid address"))})).catch(console.error)}},{key:"render",value:function(){var t=this;return r.a.createElement(x.n,{color:"black",dark:!0,expand:"md",fixed:"top"},r.a.createElement(x.o,null,r.a.createElement("img",{src:C.a,alt:"logo",className:"navLogo"}),r.a.createElement("strong",{className:"white-text"},"rDai explorer")),r.a.createElement(x.q,{onClick:this.toggleCollapse.bind(this)}),r.a.createElement(x.d,{id:"navbarCollapse",isOpen:this.state.isOpen,navbar:!0},r.a.createElement(x.p,{left:!0},r.a.createElement(x.l,null,r.a.createElement(x.m,{link:!0,to:"/".concat(this.props.network,"/Overview")},"Overview")),r.a.createElement(x.l,null,r.a.createElement(x.m,{link:!0,to:"/".concat(this.props.network,"/about")},"About"))),r.a.createElement(x.p,{right:!0},r.a.createElement(x.l,null,r.a.createElement(x.i,{waves:!0,onSubmit:this.submit.bind(this)},r.a.createElement("div",{className:"md-form my-0"},r.a.createElement("input",{type:"text",placeholder:"Search","aria-label":"Search",onChange:this.updateSearch.bind(this),className:"form-control mr-sm-2"})))),r.a.createElement(x.l,null,r.a.createElement(x.e,null,r.a.createElement(x.h,{nav:!0,caret:!0},r.a.createElement(x.j,{icon:"globe"})),r.a.createElement(x.g,{className:"dropdown-default"},Object.entries(this.props.config.networks).map((function(e){var n=Object(y.a)(e,2),a=n[0];n[1];return r.a.createElement(x.f,{key:a,href:"#!",onClick:function(){return t.props.emitter.emit("switchNetwork",a)}},a)}))))))))}}]),e}(r.a.Component),S=n(22),z=n(45),R=n(56),F=function(t){var e=r.a.useRef(),n=r.a.useState({id:null,anchor:null}),a=Object(y.a)(n,1)[0],c=r.a.useCallback((function(n){a.anchor||(a.anchor=e.current.cameraPosition()),a.id=n.id;var r=1+50/Math.hypot(n.x,n.y,n.z);e.current.cameraPosition({x:n.x*r,y:n.y*r,z:n.z*r},{x:n.x,y:n.y,z:n.z},1e3),t.emitter.emit("viewNode",n.details)}),[e,t,a]),o=r.a.useCallback((function(){a.anchor&&(e.current.cameraPosition({x:a.anchor.x,y:a.anchor.y,z:a.anchor.z},a.anchor.lookAt,1e3),a.anchor=null,a.id=null,t.emitter.emit("viewNode",null))}),[e,t,a]),i=r.a.useCallback((function(t){t&&t.id!==a.id?c(t):o(t)}),[a,c,o]),l=r.a.useCallback((function(t){window.location.href="https://etherscan.io/address/".concat(t.id)}),[]);return r.a.createElement(R.b,{ref:e,graphData:t.data,enableNodeDrag:!1,nodeLabel:function(t){return t.id},nodeVal:function(t){return Math.log(1+t.balance)},nodeAutoColorBy:function(t){return t.group},nodeOpacity:1,nodeResolution:16,linkCurvature:.5,linkDirectionalParticles:function(t){return Math.log(1+t.amount)},linkDirectionalParticleWidth:function(t){return Math.log(1+Math.log(1+t.amount))},linkDirectionalParticleResolution:8,onNodeClick:function(t){return i(t)},onNodeRightClick:function(t){return l(t)},onLinkClick:function(t){return i(null)},onBackgroundClick:function(){return i(null)},backgroundColor:"#111111"})},L=n(32),M=n(238),A=function(t){function e(){var t,n;Object(i.a)(this,e);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).state={view:!1,data:null},n}return Object(d.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.subscription=this.props.emitter.addListener("viewNode",(function(e){t.setState({data:e,view:!!e})}))}},{key:"componentWillUnmount",value:function(){this.subscription.remove()}},{key:"render",value:function(){var t=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{show:this.state.view,onHide:function(){return t.setState({view:!1})},autoFocus:!1,backdrop:!1,centered:!0,className:"text-light"},this.state.data&&r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a.Header,{closeButton:!0},r.a.createElement(M.a.Title,null,"Account details")),r.a.createElement(M.a.Body,null,r.a.createElement("ul",null,r.a.createElement("li",null,"Address: ",r.a.createElement(L.a,{to:"/".concat(this.props.network,"/nodeview/").concat(this.state.data.id)},this.state.data.id)),r.a.createElement("li",null,"Balance: ",this.state.data.balance),r.a.createElement("li",null,"Hat:     ",this.state.data.hat?this.state.data.hat.id:"unset"),this.state.data.loansOwned.length?r.a.createElement("li",null,"Loans Owner:",r.a.createElement("ul",null,this.state.data.loansOwned.map((function(e,n){return r.a.createElement("li",{key:n},"Recipient: ",r.a.createElement(L.a,{to:"/".concat(t.props.network,"/nodeview/").concat(e.recipient.id)},e.recipient.id)," (",e.amount," rDai)")})))):null,this.state.data.loansReceived.length?r.a.createElement("li",null,"Loans Received:",r.a.createElement("ul",null,this.state.data.loansReceived.map((function(e,n){return r.a.createElement("li",{key:n},"Owner: ",r.a.createElement(L.a,{to:"/".concat(t.props.network,"/nodeview/").concat(e.owner.id)},e.owner.id)," (",e.amount," rDai)")})))):null)))))}}]),e}(r.a.Component),B=(n(222),function(t){function e(){return Object(i.a)(this,e),Object(s.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{id:"Loading"},r.a.createElement("img",{src:C.a,alt:"logo"}))}}]),e}(r.a.Component)),P=n(52),_=n(53),T=n.n(_);function H(){var t=Object(P.a)(["\nquery node($address: String)\n{\n\taccount(id: $address)\n\t{\n\t\tid\n\t\tbalance\n\t\tloansOwned(where: { amount_gt: 0 })\n\t\t{\n\t\t\tamount\n\t\t\towner\n\t\t\t{\n\t\t\t\tid\n\t\t\t}\n\t\t\trecipient\n\t\t\t{\n\t\t\t\tid\n\t\t\t}\n\t\t\that\n\t\t\t{\n\t\t\t\tid\n\t\t\t}\n\t\t}\n\t\tloansReceived(where: { amount_gt: 0 })\n\t\t{\n\t\t\tamount\n\t\t\towner\n\t\t\t{\n\t\t\t\tid\n\t\t\t}\n\t\t\trecipient\n\t\t\t{\n\t\t\t\tid\n\t\t\t}\n\t\t\that\n\t\t\t{\n\t\t\t\tid\n\t\t\t}\n\t\t}\n\t}\n}\n"]);return H=function(){return t},t}function W(){var t=Object(P.a)(['\nquery\n{\n\taccounts(first: 1000, where: { id_not: "0x0000000000000000000000000000000000000000"})\n\t{\n\t\tid\n\t\tbalance\n\t\that\n\t\t{\n\t\t\tid\n\t\t}\n\t\tloansOwned(where: { amount_gt: 0 })\n\t\t{\n\t\t\tid\n\t\t\tamount\n\t\t\trecipient {\n\t\t\t\tid\n\t\t\t}\n\t\t}\n\t\tloansReceived(where: { amount_gt: 0 })\n\t\t{\n\t\t\tid\n\t\t\tamount\n\t\t\towner {\n\t\t\t\tid\n\t\t\t}\n\t\t}\n\t}\n}\n']);return W=function(){return t},t}var q={viewNode:T()(H()),viewNodes:T()(W())},I=function(t){var e,n=Object(z.a)(q.viewNodes),a=n.data,c=n.loading,o=n.error;if(c)return r.a.createElement(B,null);if(o)return"Error! ".concat(o);var i=a.accounts.map((function(t){return{id:t.id,balance:t.balance,group:(t.loansOwned.length>0?1:0)|(t.loansReceived.length>0?2:0),details:t}})),l=(e=[]).concat.apply(e,Object(S.a)(a.accounts.map((function(t){return t.loansOwned.map((function(e){return{source:t.id,target:e.recipient.id,amount:e.amount,details:e}}))}))));return r.a.createElement(r.a.Fragment,null,r.a.createElement(F,{data:{nodes:i,links:l},emitter:t.emitter,network:t.network,config:t.config,routing:t.routing}),r.a.createElement(A,{emitter:t.emitter,network:t.network,config:t.config,routing:t.routing}))},J=function(t){var e,n,a=r.a.useCallback((function(e){e.address&&t.emitter.emit("goTo","/".concat(t.network,"/nodeview/").concat(e.address))}),[t]),c=r.a.useCallback((function(t){t.address&&(window.location.href="https://etherscan.io/address/".concat(t.address))}),[]),o=Object(z.a)(q.viewNode,{variables:{address:t.routing.match.params.address}}),i=o.data,l=o.loading,s=o.error;if(l)return r.a.createElement(B,null);if(s)return console.error(s),null;if(i.account){var u={},d={},m=!0,h=!1,p=void 0;try{for(var f,b=i.account.loansOwned[Symbol.iterator]();!(m=(f=b.next()).done);m=!0){var w=f.value;u[w.hat?w.hat.id:0]|=0,u[w.hat?w.hat.id:0]+=parseFloat(w.amount)}}catch(x){h=!0,p=x}finally{try{m||null==b.return||b.return()}finally{if(h)throw p}}var v=!0,g=!1,k=void 0;try{for(var E,O=i.account.loansReceived[Symbol.iterator]();!(v=(E=O.next()).done);v=!0){var j=E.value;d[j.hat?j.hat.id:0]|=0,d[j.hat?j.hat.id:0]+=parseFloat(j.amount)}}catch(x){g=!0,k=x}finally{try{v||null==O.return||O.return()}finally{if(g)throw k}}e=[].concat(Object(S.a)(Object(S.a)(new Set([i.account.id].concat(Object(S.a)(i.account.loansReceived.map((function(t){return t.owner.id}))),Object(S.a)(i.account.loansOwned.map((function(t){return t.recipient.id})))))).map((function(t){return{id:t,label:t,address:t,color:t===i.account.id?null:"#444444",size:t===i.account.id?3:2}}))),Object(S.a)(Object(S.a)(new Set([].concat(Object(S.a)(i.account.loansReceived.map((function(t){return t.hat?t.hat.id:"0"}))),Object(S.a)(i.account.loansOwned.map((function(t){return t.hat?t.hat.id:"0"})))))).map((function(t){return{id:t,label:"hat ".concat(t),color:"#888888",size:1}})))),n=[].concat(Object(S.a)(Object.entries(u).map((function(t){var e=Object(y.a)(t,2),n=e[0],a=e[1];return{source:i.account.id,target:n,label:"".concat(a," rDai"),size:a}}))),Object(S.a)(Object.entries(d).map((function(t){var e=Object(y.a)(t,2),n=e[0],a=e[1];return{source:n,target:i.account.id,label:"".concat(a," rDai"),size:a}}))),Object(S.a)(i.account.loansReceived.filter((function(t){return t.owner.id!==i.account.id})).map((function(t){return{source:t.owner.id,target:t.hat?t.hat.id:"0",label:"".concat(t.amount," rDai"),size:t.amount}}))),Object(S.a)(i.account.loansOwned.filter((function(t){return t.recipient.id!==i.account.id})).map((function(t){return{source:t.hat?t.hat.id:"0",target:t.recipient.id,label:"".concat(t.amount," rDai"),size:t.amount}}))))}else e=[{id:t.match.params.address,label:t.match.params.address,address:t.match.params.address,size:3}],n=[];return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{graphData:{nodes:e,links:n},nodeLabel:function(t){return t.label},nodeVal:function(t){return t.size},nodeAutoColorBy:function(t){return t.group},linkLabel:function(t){return t.label},linkDirectionalParticles:function(t){return Math.log(1+t.size)},linkDirectionalParticleWidth:function(t){return Math.log(1+Math.log(1+t.size))},linkCurvature:.5,onNodeClick:function(t){return a(t)},onNodeRightClick:function(t){return c(t)},backgroundColor:"#FFFFFF"}),";")},U=function(t){function e(){var t,n;Object(i.a)(this,e);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).state={network:n.props.routing.match.params.network,client:null},n}return Object(d.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this.props.config.networks[this.state.network].endpoint,e=new v.a,n=new g.a({uri:t}),a=new w.a({cache:e,link:n});this.setState({client:a})}},{key:"render",value:function(){var t=this;return r.a.createElement(r.a.Fragment,null,this.state.client?r.a.createElement(b.a,{client:this.state.client},r.a.createElement(D,Object.assign({network:this.state.network},this.props)),r.a.createElement(m.b,{exact:!0,path:"/".concat(this.state.network),render:function(e){return r.a.createElement(m.a,{to:"/".concat(t.state.network,"/overview/")})}}),r.a.createElement(m.b,{exact:!0,path:"/".concat(this.state.network,"/about"),render:function(e){return r.a.createElement(O,{emitter:t.props.emitter,network:t.state.network,config:t.props.config,routing:e})}}),r.a.createElement(m.b,{exact:!0,path:"/".concat(this.state.network,"/overview"),render:function(e){return r.a.createElement(I,{emitter:t.props.emitter,network:t.state.network,config:t.props.config,routing:e})}}),r.a.createElement(m.b,{exact:!0,path:"/".concat(this.state.network,"/nodeview/:address"),render:function(e){return r.a.createElement(J,{emitter:t.props.emitter,network:t.state.network,config:t.props.config,routing:e})}})):r.a.createElement(B,null))}}]),e}(r.a.Component),V=function(t){function e(){var t,n;Object(i.a)(this,e);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).state={history:Object(h.a)(),emitter:new p.EventEmitter},n}return Object(d.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){this.subscription_route=this.state.emitter.addListener("goTo",this.goTo.bind(this)),this.subscription_network=this.state.emitter.addListener("switchNetwork",this.switchNetwork.bind(this))}},{key:"componentWillUnmount",value:function(){this.subscription_route.remove(),this.subscription_network.remove()}},{key:"switchNetwork",value:function(t){this.goTo(this.state.history.location.pathname.replace(/\w+/,t))}},{key:"goTo",value:function(t){this.state.history.push(t)}},{key:"render",value:function(){var t=this;return r.a.createElement(m.c,{history:this.state.history},r.a.createElement(m.b,{exact:!0,path:"/"},r.a.createElement(m.a,{to:"/".concat(Object.keys(f.networks).find(Boolean))})),r.a.createElement(m.b,{path:"/:network",render:function(e){return r.a.createElement(U,{emitter:t.state.emitter,config:f,routing:e})}}))}}]),e}(r.a.Component);n(225),n(226),n(227),n(228);o.a.render(r.a.createElement(V,null),document.getElementById("root"))},51:function(t,e,n){t.exports=n.p+"static/media/rDai.faac703b.svg"},68:function(t){t.exports=JSON.parse('{"networks":{"rDai":{"endpoint":"https://api.thegraph.com/subgraphs/name/pi0neerpat/mcd-rdai"},"rSai":{"endpoint":"https://api.thegraph.com/subgraphs/name/amxx/rdai"}}}')},90:function(t,e,n){t.exports=n.p+"static/media/croubois.b0cb6103.png"}},[[119,1,2]]]);
//# sourceMappingURL=main.739bb568.chunk.js.map